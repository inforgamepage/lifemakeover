<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://inforgamepage.github.io/lifemakeover/styles.css">
    <title>Bách khoa Vvanna</title>
</head>
<body class="body-elements">
    <!-- Navbar -->
    <div class="navbar">
        <div class="dropdown">
            <button class="dropdown-btn homepage-icon" id="homepage">Trang chủ</button>   
        </div>
        <div class="dropdown">
            <button class="dropdown-btn infor-icon" onclick="toggleDropdown('inforDropdown')">Thông tin</button>
            <div id="inforDropdown" class="dropdown-content">
                <a href="#">Cốt truyện</a>
                <a href="#">Lầu quay</a>
                <a href="#">Sự kiện</a>
                <a href="#">Mật khẩu thời trang</a>
                <a href="#">Đồng hành</a>
                <a href="#">Chụp ảnh</a>
                <a href="#">Thời trang</a>
            </div>
        </div>
        <div class="dropdown"> 
            <button class="dropdown-btn guilde-icon" onclick="toggleDropdown('guildeDropdown')">Hướng dẫn chơi</button>
            <div id="guildeDropdown" class="dropdown-content">
                <a href="https://inforgamepage.github.io/lifemakeover/bachkhoavvanna.html">Bách khoa Vvanna</a>
                <a href="#">Thử thách Vvanna</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropdown-btn globe-icon" onclick="toggleDropdown('languageDropdown')">Ngôn ngữ</button>
            <div id="languageDropdown" class="dropdown-content">
                <a href="quizen.html">English</a>
                <a href="quizindo.html">Bahasa</a>
                <a href="quizth.html">ภาษาไทย</a>
                <a href="https://inforgamepage.github.io/lifemakeover/bachkhoavvanna.html">Tiếng Việt</a>
                <a href="quizru.html">Pусский язык</a>
                <a href="quizcn.html">中文</a>
            </div>
        </div>
        <div class="dropdown">
            <button id="themeToggleBtn" class="dropdown-btn theme-icon" onclick="toggleTheme()" ontouchstart="toggleTheme()">Sáng</button>
        </div>
    </div>

    <!-- Main -->
    <div class="main-container qna">
        <h1>Bách khoa Vvanna</h1>
        <input type="text" id="searchBar" placeholder="Tìm kiếm câu hỏi..." onkeyup="searchQuestions()">

        <!-- Container dữ liệu chính, JS fetch CSV sẽ render vào đây -->
        <div class="question" id="questionsContainer"></div>

        <!-- Container tạm cho kết quả search -->
        <div class="question" id="searchResultsContainer" style="display:none;"></div>

        <!-- "Không tìm thấy" -->
        <div id="no-result" class="no-result" style="display:none;">
            Không tìm thấy nội dung phù hợp, đảm bảo gõ chính xác hoặc chọn đúng ngôn ngữ và thử lại.
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="version">
            <a href="#" target="_blank" aria-label="SGMY"><img src="https://scontent.fhan14-3.fna.fbcdn.net/v/t39.30808-6/465401902_594285636278445_5173138900862067601_n.jpg?_nc_cat=110&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=teFXG7HUvVwQ7kNvgFC-eqV&_nc_zt=23&_nc_ht=scontent.fhan14-3.fna&_nc_gid=AumxE3Bj7HW8yICHPzvCCc5&oh=00_AYCG_ILDzM_25opfuMKsFa_0EFynm4bkRZiUH6seTsWJPQ&oe=672BF43D" alt="SGMY"></a>
            <a href="#" target="_blank" aria-label="JP"><img src="https://scontent.fhan14-1.fna.fbcdn.net/v/t39.30808-6/465430590_594833692890306_1983923336165870172_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=hqyvZ_jT6I0Q7kNvgGqMl5Y&_nc_zt=23&_nc_ht=scontent.fhan14-1.fna&_nc_gid=AlfS6-EDYa-0XfRsI9NOqsy&oh=00_AYCVDN2b8n2pip6R_OtnNVr7zp0TWhg_zm3IqoksIsWtDw&oe=672D0DD7" alt="JP"></a>
            <a href="#" target="_blank" aria-label="CN"><img src="https://scontent.fhan14-4.fna.fbcdn.net/v/t39.30808-6/465270091_594285566278452_7467768867169752109_n.jpg?_nc_cat=102&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=JXo4FTZlTi0Q7kNvgEQbAEj&_nc_zt=23&_nc_ht=scontent.fhan14-4.fna&_nc_gid=AbVLTW4V96EUDFzOq-j-0DG&oh=00_AYAqTK-3sv8Xx8hx_Y91B-_MKvu-uCFfZL2qQzjjk8PVPw&oe=672BF579" alt="CN"></a>
            <a href="#" target="_blank" aria-label="Global"><img src="https://scontent.fhan14-1.fna.fbcdn.net/v/t39.30808-6/465220547_594285579611784_3412323692812513031_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=sPvLsMNhAvIQ7kNvgENbVGj&_nc_zt=23&_nc_ht=scontent.fhan14-1.fna&_nc_gid=AM8ulEUf3iXktx3aelwCbdG&oh=00_AYD8Ag7-hrnLSZggCvoke77a94RXYVSzwVJNWUNR8Fyz2w&oe=672C19F8" alt="Global"></a>
            <a href="#" target="_blank" aria-label="VN"><img src="https://scontent.fhan14-5.fna.fbcdn.net/v/t39.30808-6/465468014_594285662945109_3427509265727002851_n.jpg?_nc_cat=109&ccb=1-7&_nc_sid=aa7b47&_nc_ohc=XBsaE_jZ4S4Q7kNvgGe6LJK&_nc_zt=23&_nc_ht=scontent.fhan14-5.fna&_nc_gid=AQILA2bluF-LHbKqd_QmXuU&oh=00_AYB66BdEy0-1exrJYCpkEQ-nTkbzWEgL5ca4LUFifN75XA&oe=672C19C2" alt="VN"></a>
        </div>
        <div class="info">
            <p>Chơi quá 180 phút một ngày sẽ ảnh hưởng xấu đến sức khỏe.
            <br><br>
            Trò chơi điện tử "Life Makeover" là trò chơi dành cho người lớn (từ 18 tuổi trở lên).
            <br><br>
            Mọi thông tin được tổng hợp dựa trên nội dung từ trò chơi "Life Makeover" của Archosaur Games và thuộc sở hữu của Archosaur Games.</p>
        </div>
    </footer>

    <!-- JS -->
    <script src="https://inforgamepage.github.io/lifemakeover/vetrangchu.js"></script>
    <script src="https://inforgamepage.github.io/lifemakeover/script.js"></script>

    <!-- Script search fix -->
    <script>
        const searchBar = document.getElementById('searchBar');
        const questionsContainer = document.getElementById('questionsContainer');
        const searchResultsContainer = document.getElementById('searchResultsContainer');
        const noResult = document.getElementById('no-result');

        function searchQuestions() {
            const query = searchBar.value.toLowerCase().trim();
            if(query === "") {
                searchResultsContainer.style.display = "none";
                questionsContainer.style.display = "block";
                noResult.style.display = "none";
                return;
            }

            const questions = Array.from(questionsContainer.querySelectorAll("p"));
            let matched = questions.filter(q => q.innerText.toLowerCase().includes(query));

            searchResultsContainer.innerHTML = "";
            if(matched.length === 0){
                searchResultsContainer.style.display = "block";
                questionsContainer.style.display = "none";
                noResult.style.display = "block";
            } else {
                matched.forEach(m => searchResultsContainer.appendChild(m.cloneNode(true)));
                searchResultsContainer.style.display = "block";
                questionsContainer.style.display = "none";
                noResult.style.display = "none";
            }
        }

        // Fetch CSV từ Google Sheet và render vào questionsContainer
        async function fetchCSV() {
            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vS7HOXwDgQimfgHMvIKOVgSGalxrC361rsoegLJXBW6IyIXdoKgifQGibDm9vcJEH2CMel5vs38OVN_/pub?output=csv');
                const data = await response.text();
                const rows = data.split('\n').slice(1); // bỏ hàng header
                questionsContainer.innerHTML = '';
                rows.forEach(row => {
                    const cols = row.split(',');
                    if(cols.length >= 2){
                        const question = cols[0].trim();
                        const answer = cols[1].trim();
                        if(question && answer){
                            const p = document.createElement('p');
                            p.innerHTML = `<strong>Câu hỏi: </strong>${question}<br><strong>Đáp án: </strong>${answer}`;
                            questionsContainer.appendChild(p);
                        }
                    }
                });
            } catch(err){
                console.error(err);
            }
        }

        fetchCSV();
        setInterval(fetchCSV, 1000); // cập nhật CSV mỗi giây
    </script>
</body>
</html>
